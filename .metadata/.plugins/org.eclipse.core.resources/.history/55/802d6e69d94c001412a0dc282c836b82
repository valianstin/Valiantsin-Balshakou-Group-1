package com.epam.task.classloader;

import java.net.MalformedURLException;
import java.net.URL;

import org.apache.log4j.Logger;

import com.epam.task.classloader.functionality.Function;

//Create console application for dynamic reloading of existing development functionality. 
//Existing funcionality should be placed in specifed directory and should be archived in jar. 
//The application should have console menu for choosing option, the output should be done through usage of log4j library. 

public class App {

	static final Logger logger = Logger.getLogger(App.class);
	public static void main(String[] args) throws InstantiationException,
			IllegalAccessException, MalformedURLException {
		// for (; ; ) {
		
		try {
			URL[] urls=new URL[1];
			urls[1]=new URL("F:\\test\\incrementImpl.jar");
			ClassLoader loader = new IncrementClassLoader(
					"F:/test/incrementImpl.jar",
					ClassLoader.getSystemClassLoader());
			Class clazz = Class.forName(
					"com.epam.task.classloader.functionality.IncrementImpl1",
					true, loader);
			
			int i = 0;
			Function fun = (Function) clazz.newInstance();

			i = fun.increment(i);
			
			logger.info(i);
		} catch (ClassNotFoundException e) {
			System.out.println("asfd");
		}

		/*
		 * TestModule object = (TestModule) clazz.newInstance();
		 * logger.info(object); TestModuleWrapper wrapper = new
		 * TestModuleWrapper(object); wrapper.hello(); new BufferedReader(new
		 * InputStreamReader(System.in)).readLine();
		 */
		// }

	}

}
